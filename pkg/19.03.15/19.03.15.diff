diff -uNr 19.03.15.orig.sh 19.03.15.sh
--- 19.03.15.orig.sh	2021-01-28 23:47:45.000000000 +0100
+++ 19.03.15.sh	2021-01-28 23:53:21.000000000 +0100
@@ -21,26 +21,11 @@
 # the script was uploaded (Should only be modified by upload job):
 SCRIPT_COMMIT_SHA="3d8fe77c2c46c5b7571f94b42793905e5b3e42e4"
 
-
-# The channel to install from:
-#   * nightly
-#   * test
-#   * stable
-#   * edge (deprecated)
-DEFAULT_CHANNEL_VALUE="stable"
-if [ -z "$CHANNEL" ]; then
-	CHANNEL=$DEFAULT_CHANNEL_VALUE
-fi
-
-DEFAULT_DOWNLOAD_URL="https://download.docker.com"
-if [ -z "$DOWNLOAD_URL" ]; then
-	DOWNLOAD_URL=$DEFAULT_DOWNLOAD_URL
-fi
-
-DEFAULT_REPO_FILE="docker-ce.repo"
-if [ -z "$REPO_FILE" ]; then
-	REPO_FILE="$DEFAULT_REPO_FILE"
-fi
+CHANNEL="stable"
+DOWNLOAD_URL="https://download.docker.com"
+REPO_FILE="docker-ce.repo"
+VERSION=19.03.15
+DIND_TEST_WAIT=${DIND_TEST_WAIT:-3s}  # Wait time until docker start at dind test env
 
 mirror=''
 DRY_RUN=${DRY_RUN:-}
@@ -69,6 +54,18 @@
 		;;
 esac
 
+start_docker() {
+	if [ ! -z $DIND_TEST ]; then
+		# Starting dockerd manually due to dind env is not using systemd
+		dockerd &
+		sleep $DIND_TEST_WAIT
+	elif [ -d '/run/systemd/system' ] ; then
+		$sh_c 'systemctl start docker'
+	else
+		$sh_c 'service docker start'
+	fi
+}
+
 command_exists() {
 	command -v "$@" > /dev/null 2>&1
 }
@@ -329,11 +326,20 @@
 		;;
 
 		centos|rhel)
+			# installing centos packages
+			lsb_dist="centos"
 			if [ -z "$dist_version" ] && [ -r /etc/os-release ]; then
 				dist_version="$(. /etc/os-release && echo "$VERSION_ID")"
 			fi
 		;;
 
+		oracleserver|ol)
+			# installing centos packages
+			lsb_dist="centos"
+			# need to switch lsb_dist to match yum repo URL
+			dist_version="$(rpm -q --whatprovides redhat-release --queryformat "%{VERSION}\n" | sed 's/\/.*//' | sed 's/\..*//' | sed 's/Server*//')"
+		;;
+
 		*)
 			if command_exists lsb_release; then
 				dist_version="$(lsb_release --release | cut -f2)"
@@ -404,6 +410,7 @@
 					$sh_c "apt-get install -y -qq --no-install-recommends docker-ce-cli=$cli_pkg_version >/dev/null"
 				fi
 				$sh_c "apt-get install -y -qq --no-install-recommends docker-ce$pkg_version >/dev/null"
+				start_docker
 			)
 			echo_docker_as_nonroot
 			exit 0
@@ -474,10 +481,25 @@
 					$sh_c "$pkg_manager install -y -q docker-ce-cli-$cli_pkg_version"
 				fi
 				$sh_c "$pkg_manager install -y -q docker-ce$pkg_version"
+				if ! command_exists iptables; then
+					$sh_c "$pkg_manager install -y -q iptables"
+				fi
+				start_docker
 			)
 			echo_docker_as_nonroot
 			exit 0
 			;;
+		rancheros)
+			(
+			set -x
+			$sh_c "sleep 3;ros engine list --update"
+			engine_version="$(sudo ros engine list | awk '{print $2}' | grep ${docker_version} | tail -n 1)"
+			if [ "$engine_version" != "" ]; then
+				$sh_c "ros engine switch -f $engine_version"
+			fi
+			)
+			exit 0
+			;;
 		*)
 			if [ -z "$lsb_dist" ]; then
 				if is_darwin; then
